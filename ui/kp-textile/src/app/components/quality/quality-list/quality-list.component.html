<div class="content">
  <div class="row">
    <div class="col-md-12">
      <app-spinner *ngIf="showSpinnerCount>0"></app-spinner>
      <div class="card card-plain" *ngIf="showSpinnerCount<=0">
        <div class="card-header flex">
          <button (click)="openDialog({id:'', name:''})" class="btn btn-icon btn-round align-right">
            <i class="tim-icons icon-simple-add"></i>
          </button>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <!-- <div class="row justify" [formGroup]="filterForm">
                <div class="col-md-11 mr-bottom-remove mr-rigth-remove">
                  <div class="form-group">
                    <input formControlName="searchText" class="form-control" placeholder="search" type="text" />
                  </div>
                </div>
                <div class="col-md-1 mr-left-remove mr-top-remove">
                  <button class="btn btn-fill btn-info" (click)="applyFilter()" type="button">Search</button>
                </div>
              </div> -->
            <table mat-table [dataSource]="qualities" multiTemplateDataRows class="table tablesorter" matSort
              matSortActive="created" matSortDisableClear matSortDirection="desc">
              <ng-container matColumnDef="QualityName">
                <th mat-header-cell *matHeaderCellDef>Quality Name</th>
                <td mat-cell *matCellDef="let client" class="pointer-cursor"
                  (click)="expandedElement = expandedElement === client ? null : client">{{client.name}}</td>
              </ng-container>
              <ng-container matColumnDef="RemainingQuantity">
                <th mat-header-cell *matHeaderCellDef>Remaining Quantity</th>
                <td mat-cell *matCellDef="let client">{{client.pendingQuantity}}</td>
              </ng-container>
              <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let client" [attr.colspan]="displayedColumns.length"
                  [@detailExpand1]="client == expandedElement ? 'expanded' : 'collapsed'">
                  <div class="example-element-detail"
                    [@detailExpand]="client == expandedElement ? 'expanded' : 'collapsed'">
                    <div class="row" *ngIf="client.bailDetails && client.bailDetails.length>0; else noaddress" style="width:100%">
                      <div class="col-md-3 pointer-cursor" *ngFor="let baildata of client.bailDetails; let i = index"
                      (click)="showBaleInfo(baildata.bailNo)"
                      >
                        <div class="card" >
                          <div class="card-header">
                            # {{i+1}}
                          </div>
                          <div class="card-body">
                            Bale No: {{baildata.bailNo}}
                            <br />
                            Billed Quanitity: {{baildata.billedQuantity}}
                            <br />
                            Received Quantity: {{baildata.receivedQuantity}}
                            <br />
                            Pending Quality: {{baildata.pendingQuantity}}
                          </div>
                        </div>
                      </div>
                    </div>
                    <ng-template #noaddress>
                      No Bales
                    </ng-template>
                  </div>

                </td>
              </ng-container>
              <ng-container matColumnDef="NoBale">
                <th mat-header-cell *matHeaderCellDef>Number of Bales</th>
                <td mat-cell *matCellDef="let client">
                  {{client.bailDetails?.length}}
                </td>
              </ng-container>
              <ng-container matColumnDef="Action">
                <th mat-header-cell *matHeaderCellDef>Action</th>
                <td mat-cell *matCellDef="let client">
                  <button (click)="openDialog(client)" type="button"
                    class="btn btn-icon btn-round"> <i class="tim-icons icon-pencil"></i></button>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                [class.example-expanded-row]="expandedElement === row"></tr>
              <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
              <!-- Row shown when there is no matching data. -->
              <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" [attr.colspan]="displayedColumns.length">No data</td>
              </tr>
            </table>
            <app-pagination [pageSize]="pageSize" (pageSizeChange)="onPageSizeChange($event)"
              (nextButtonClick)="onPageChange($event)" (prevButtonClick)="onPageChange($event)"
              [pageNumber]="pageNumber" [total]="allQuality.length">
            </app-pagination>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>